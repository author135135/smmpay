{% load i18n %}
{% load advert_tags %}

<div class="filter">
    <div class="filter__open">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 13 16" style="enable-background:new 0 0 13 16;" xml:space="preserve">
            <path class="st0" d="M0,2h13v2L8,9v7l-3-2V9L0,4V2z"></path>
            <path class="st0" d="M0,0h13v1H0V0z"></path>
        </svg>
    </div>
    <div class="filter__container">
        <form id="filter-form">
            <div class="filter__form-search">
                <div class="filter__row">
                    <label class="filter__label filter__label--search">
                        <span class="filter__title">{{ filter_form.search_query.label }}</span>
                        {{ filter_form.search_query }}
                        <svg class="search-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
                            <g>
                                <path d="M495,466.2L377.2,348.4c29.2-35.6,46.8-81.2,46.8-130.9C424,103.5,331.5,11,217.5,11C103.4,11,11,103.5,11,217.5S103.4,424,217.5,424c49.7,0,95.2-17.5,130.8-46.7L466.1,495c8,8,20.9,8,28.9,0C503,487.1,503,474.1,495,466.2z M217.5,382.9C126.2,382.9,52,308.7,52,217.5S126.2,52,217.5,52C308.7,52,383,126.3,383,217.5S308.7,382.9,217.5,382.9z"></path>
                            </g>
                        </svg>
                    </label>
                </div>
            </div>
            <div class="filter__form-filter">
                <div class="filter__row">
                    <label class="filter__label">
                        <span class="filter__title">{{ filter_form.region.label }}</span>
                        {{ filter_form.region }}
                    </label>
                    <label class="filter__label">
                        <span class="filter__title">{{ filter_form.category.label }}</span>
                        {{ filter_form.category }}
                    </label>
                    <div class="filter__close">
                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 357 357" style="enable-background:new 0 0 357 357;" xml:space="preserve">
                            <g>
                                <g>
                                    <polygon points="357,35.7 321.3,0 178.5,142.8 35.7,0 0,35.7 142.8,178.5 0,321.3 35.7,357 178.5,214.2 321.3,357 357,321.3214.2,178.5"></polygon>
                                </g>
                            </g>
                        </svg>
                    </div>
                </div>
                <div class="filter__row">
                    <label class="filter__label">
                        <span class="filter__title">{% trans 'Price' %},</span>
                        <div class="filter__block">
                            <div class="filter__range">{{ filter_form.price_min.label }}</div>
                            {{ filter_form.price_min }}
                        </div>
                        <div class="filter__block">
                            <div class="filter__range">{{ filter_form.price_max.label }}</div>
                            {{ filter_form.price_max }}
                        </div>
                    </label>
                    <label class="filter__label filter__label--align">
                        <span class="filter__title">{% trans 'Subscribers' %},</span>
                        <div class="filter__block">
                            <div class="filter__range">{{ filter_form.subscribers_min.label }}</div>
                            {{ filter_form.subscribers_min }}
                        </div>
                        <div class="filter__block">
                            <div class="filter__range">{{ filter_form.subscribers_max.label }}</div>
                            {{ filter_form.subscribers_max }}
                        </div>
                    </label>
                    <button type="button" class="filter__reset button">Очистить фильтр</button>
                    <button type="submit" class="filter__submit button">Применить фильтр</button>
                </div>
            </div>
        </form>
        {% if social_networks %}
            <ul class="filter__form-social">
                {% for social_network in social_networks %}
                    <li class="{% if selected_social_network == social_network.code %}active{% endif %}">
                        <a href="?{% build_querystring request.GET 'social_network,page' social_network=social_network.code %}" class="{{ social_network.code }}">
                            <span class="icon"></span>
                        </a>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>
</div>